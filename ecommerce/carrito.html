<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Bolsa de Compras</title>
    <!-- Carga de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración personalizada de Tailwind para fuentes y colores -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-green': '#5A7543', // Color principal del logo y acentos
                        'secondary-gray': '#3A3A3A', // Color del texto oscuro/fondo del footer
                        'background-light': '#F5F5F0', // Fondo claro
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="font-sans text-secondary-gray bg-background-light min-h-screen flex flex-col">

    <!-- CABECERA y NAVEGACIÓN -->
    <header class="shadow-sm flex-shrink-0">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16 bg-white">
            <!-- Logo y Links -->
            <div class="flex items-center space-x-8">
                <a href="index.html" class="flex items-center space-x-2 text-primary-green">
                    <!-- Icono SVG simple de hoja de té -->
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C8.13 2 5 5.13 5 9C5 12.31 7.23 15.11 10.33 16.03L11.5 22L12.5 22L13.67 16.03C16.77 15.11 19 12.31 19 9C19 5.13 15.87 2 12 2ZM12 14C9.79 14 8 12.21 8 10C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 12.21 14.21 14 12 14Z"/>
                    </svg>
                    <span class="font-bold text-lg hidden sm:inline">Logo</span>
                </a>
                <!-- Menú de navegación -->
                <div class="hidden md:flex space-x-6 text-sm font-medium">
                    <a href="#" class="text-secondary-gray hover:text-primary-green transition duration-150">Shop</a>
                    <a href="#" class="text-secondary-gray hover:text-primary-green transition duration-150">Subscribe</a>
                    <a href="#" class="text-secondary-gray hover:text-primary-green transition duration-150">About</a>
                </div>
            </div>

            <!-- Búsqueda -->
            <div class="flex items-center space-x-4">
                <div class="relative hidden sm:block">
                    <input type="text" placeholder="Search product" class="pl-10 pr-4 py-1 border border-gray-300 rounded-full text-sm focus:ring-primary-green focus:border-primary-green" />
                    <svg class="w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
            </div>
        </nav>
    </header>

    <!-- CUERPO PRINCIPAL - VISTA DEL CARRITO -->
    <main class="main-content container mx-auto px-4 sm:px-6 lg:px-8 py-10 flex-grow">
        
        <!-- Botón de Retroceso -->
        <a href="#" class="flex items-center text-sm font-medium text-gray-600 hover:text-primary-green mb-8">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            Back
        </a>

        <!-- Título -->
        <h1 class="text-3xl md:text-5xl font-extrabold text-secondary-gray mb-10">
            My shopping bag
        </h1>

        <!-- Contenedor Principal del Carrito -->
        <div id="cart-container" class="space-y-6">

            <!-- Tarjeta de Producto del Carrito (Simulación) -->
            <!-- En una aplicación real, esto sería un bucle por cada producto en el carrito. -->
            <div id="product-item-1" class="flex flex-col md:flex-row justify-between items-start md:items-center bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-100">
                
                <!-- Detalles del Producto (Izquierda) -->
                <div class="flex items-center space-x-4 flex-grow w-full md:w-auto">
                    <!-- Imagen del Producto -->
                    <div class="w-20 h-20 sm:w-24 sm:h-24 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                    <img id="product-image-1" src="https://placehold.co/100x100/D4C7B4/3A3A3A?text=Green+Tea+Bag" 
                        alt="Green Tea" class="w-full h-full object-cover">
                    </div>
                    
                    <!-- Nombre y Precio Unitario -->
                    <div class="flex-grow">
                        <h2 id="product-name-1" class="text-lg font-semibold text-secondary-gray">Green Tea</h2>
                        <p id="product-price-1" class="text-primary-green font-bold text-lg">$31</p>
                    </div>
                </div>

                <!-- Controles de Cantidad y Precio Total (Derecha) -->
                <div class="flex flex-col sm:flex-row md:flex-col lg:flex-row items-start md:items-end lg:items-center space-y-4 sm:space-y-0 md:space-y-4 lg:space-y-0 sm:space-x-8 md:space-x-0 lg:space-x-8 mt-4 md:mt-0 w-full md:w-auto">
                    
                    <div class="flex flex-col items-start md:items-end">
                        <p class="text-sm font-semibold text-gray-600 mb-1 hidden sm:block">Quantity:</p>
                        
                        <!-- Controles de Cantidad (Simulando el diseño - 1 + +) -->
                        <div class="flex items-center text-sm">
                            <!-- Botón de resta -->
                            <button onclick="changeQuantity(1, -1)" id="qty-minus-1" class="p-2 text-base font-bold text-gray-600 hover:text-secondary-gray transition duration-150 rounded-l-lg opacity-50 cursor-not-allowed" disabled>-</button>
                            <!-- Cantidad -->
                            <span id="qty-display-1" class="font-bold text-base px-3 w-8 text-center border-y border-gray-200">1</span>
                            <!-- Botón de suma -->
                            <button onclick="changeQuantity(1, 1)" id="qty-plus-1" class="p-2 text-base font-bold text-gray-600 hover:text-secondary-gray transition duration-150 rounded-r-lg">+</button>
                            
                            <!-- Botón de remover -->
                            <button onclick="removeItem(1)" class="ml-4 text-xs text-red-500 hover:text-red-700 font-medium">
                                Remove
                            </button>
                        </div>
                    </div>
                    
                    <!-- Cantidad Total para el Producto (Simulado) -->
                    <div class="hidden sm:block">
                        <span id="item-total-price-1" class="text-2xl font-extrabold text-secondary-gray">$31</span>
                    </div>
                </div>
                
                <!-- Total del item en móvil -->
                <div class="w-full text-right mt-3 block sm:hidden">
                    <span class="text-lg font-extrabold text-secondary-gray">$31</span>
                </div>
            </div>
            <!-- Fin Tarjeta de Producto -->

            
            <!-- OPCIONES ADICIONALES Y TOTAL FINAL -->
            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-100 mt-6 space-y-4">
                
                <!-- Opciones de Regalo y Suscripción -->
                <div class="space-y-3 border-b pb-4">
                    <label class="flex items-center text-sm text-secondary-gray cursor-pointer">
                        <input type="checkbox" id="gift-wrapping" class="rounded text-primary-green focus:ring-primary-green">
                        <span class="ml-3">Buying as a Gift? Tick here to include gift wrapping.</span>
                    </label>
                    <label class="flex items-center text-sm text-secondary-gray cursor-pointer">
                        <input type="checkbox" id="subscribe-newsletter" class="rounded text-primary-green focus:ring-primary-green">
                        <span class="ml-3">Do you want to subscribe to our newsletter for limited offers and promotions?</span>
                    </label>
                </div>

                <!-- Resumen de Totales y Botones -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-end pt-4">
                    
                    <!-- Total Final (Izquierda/Arriba) -->
                    <div class="mb-4 sm:mb-0 order-2 sm:order-1 self-end sm:self-auto">
                        <!-- El precio total va aquí, simulado igual al ítem único por simplicidad -->
                        <span id="cart-total-display" class="text-3xl font-extrabold text-secondary-gray">$31</span>
                    </div>

                    <!-- Botones de Acción (Derecha/Abajo) -->
                    <div class="flex space-x-4 order-1 sm:order-2 w-full sm:w-auto justify-end sm:justify-start">
                        <button id="go-to-checkout" class="bg-primary-green hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-150 shadow-md">
                            Go to checkout
                        </button>
                        <button id="back-to-store" class="bg-white border border-gray-300 text-secondary-gray hover:bg-gray-50 font-bold py-3 px-6 rounded-lg transition duration-150 shadow-md">
                            Back to store
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- FOOTER -->
    <footer class="bg-secondary-gray text-white mt-12 flex-shrink-0">
        <!-- Sección de Suscripción -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10 border-b border-gray-600">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <!-- Texto de invitación -->
                <p class="text-sm">Let's stay in touch! Sign up to our newsletter and get the best deals!</p>
                <!-- Formulario de suscripción -->
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <input type="email" placeholder="Insert your email address here" class="flex-grow p-3 rounded-lg text-secondary-gray focus:ring-primary-green focus:border-primary-green" />
                    <button class="bg-primary-green hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-150">
                        Subscribe now
                    </button>
                </div>
            </div>
        </div>

        <!-- Sección de Enlaces y Logo -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10 text-sm">
            <div class="grid grid-cols-2 md:grid-cols-5 gap-8">
                <!-- Columna 1: Logo y Copyright -->
                <div class="col-span-2 md:col-span-1 flex flex-col items-start">
                    <a href="index.html" class="flex items-center space-x-2 text-primary-green mb-4">
                        <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C8.13 2 5 5.13 5 9C5 12.31 7.23 15.11 10.33 16.03L11.5 22L12.5 22L13.67 16.03C16.77 15.11 19 12.31 19 9C19 5.13 15.87 2 12 2ZM12 14C9.79 14 8 12.21 8 10C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 12.21 14.21 14 12 14Z"/>
                        </svg>
                        <span class="font-bold text-lg text-white">Logo</span>
                    </a>
                    <p class="text-xs text-gray-400">&copy; 2023 The Tea Stop. All rights reserved.</p>
                    <div class="flex space-x-3 mt-4">
                        <!-- Íconos de redes sociales (simulados) -->
                        <a href="#" class="text-gray-400 hover:text-white transition duration-150">F</a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-150">I</a>
                    </div>
                </div>

                <!-- Columnas de Enlaces -->
                <div>
                    <h3 class="font-semibold mb-3">Help</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white">FAQ</a></li>
                        <li><a href="#" class="hover:text-white">Customer service</a></li>
                        <li><a href="#" class="hover:text-white">How to guides</a></li>
                        <li><a href="#" class="hover:text-white">Contact us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold mb-3">Other</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-white">Sitemap</a></li>
                        <li><a href="#" class="hover:text-white">Subscriptions</a></li>
                    </ul>
                </div>
                
            </div>
        </div>
    </footer>


    <script>
        // --- DATA MOCKUP (Simulación de un carrito con un solo producto) ---
        const cartItems = [
            { id: 1, name: "Green Tea", unitPrice: 31, quantity: 1, elementId: 'product-item-1' }
        ];

        // Referencias a elementos DOM
        const cartTotalDisplay = document.getElementById('cart-total-display');

        /**
         * Calcula y actualiza el precio total del carrito.
         */
        function updateCartTotal() {
            let total = 0;
            cartItems.forEach(item => {
                total += item.unitPrice * item.quantity;
            });
            
            cartTotalDisplay.textContent = `$${total}`;
        }

        /**
         * Calcula y actualiza el precio total de un ítem individual y su display de cantidad.
         * @param {number} itemId - ID del producto.
         */
        function updateItemDisplay(itemId) {
            const item = cartItems.find(i => i.id === itemId);
            if (!item) return;

            const totalItemPrice = item.unitPrice * item.quantity;
            const itemTotalElement = document.getElementById(`item-total-price-${itemId}`);
            const qtyDisplay = document.getElementById(`qty-display-${itemId}`);
            const qtyMinusButton = document.getElementById(`qty-minus-${itemId}`);

            // Actualiza el precio total del ítem
            if (itemTotalElement) {
                itemTotalElement.textContent = `$${totalItemPrice}`;
                // Actualiza el total en el display móvil
                itemTotalElement.closest('.bg-white').querySelector('.block.sm\\:hidden span').textContent = `$${totalItemPrice}`;
            }

            // Actualiza el display de cantidad
            if (qtyDisplay) {
                qtyDisplay.textContent = item.quantity;
            }

            // Gestiona la deshabilitación del botón de resta
            if (qtyMinusButton) {
                qtyMinusButton.disabled = (item.quantity === 1);
                qtyMinusButton.classList.toggle('opacity-50', item.quantity === 1);
                qtyMinusButton.classList.toggle('cursor-not-allowed', item.quantity === 1);
            }
        }


        /**
         * Cambia la cantidad de un producto en el carrito.
         * @param {number} itemId - ID del producto a modificar.
         * @param {number} change - Cantidad a sumar o restar (-1 o 1).
         */
        function changeQuantity(itemId, change) {
            const item = cartItems.find(i => i.id === itemId);
            
            if (item) {
                const newQuantity = item.quantity + change;
                
                if (newQuantity >= 1) {
                    item.quantity = newQuantity;
                }
                
                updateItemDisplay(itemId);
                updateCartTotal();
            }
        }
        
        /**
         * Remueve un ítem del carrito (simulación).
         * @param {number} itemId - ID del producto a remover.
         */
        function removeItem(itemId) {
            const index = cartItems.findIndex(i => i.id === itemId);
            
            if (index !== -1) {
                // Remueve el elemento del array de datos
                cartItems.splice(index, 1);
                
                // Remueve el elemento del DOM
                const element = document.getElementById(`product-item-${itemId}`);
                if (element) {
                    element.remove();
                }
                
                // Si ya no quedan productos, muestra un mensaje
                if (cartItems.length === 0) {
                    const container = document.getElementById('cart-container');
                    container.innerHTML = `
                        <div class="text-center py-10 bg-white rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold">Your shopping bag is empty.</h2>
                            <p class="mt-2 text-gray-500">Time to find some delicious tea!</p>
                            <button id="back-to-store-empty" class="mt-6 bg-primary-green hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-150">
                                Back to store
                            </button>
                        </div>
                    `;
                    document.getElementById('back-to-store-empty').addEventListener('click', () => {
                         console.log("Navegar a la tienda.");
                    });
                } else {
                    // Actualiza el total si aún quedan productos
                    updateCartTotal();
                }
            }
        }


        // --- INICIALIZACIÓN ---

        window.onload = function() {
            // Inicializa los displays de cantidad y precio para todos los ítems
            cartItems.forEach(item => {
                updateItemDisplay(item.id);
            });
            
            // Calcula el total del carrito al inicio
            updateCartTotal();

            // Placeholder para botones
            const goToCheckoutBtn = document.getElementById('go-to-checkout');
            if (goToCheckoutBtn) {
                goToCheckoutBtn.addEventListener('click', () => {
                    // Calcula el total actual del carrito
                    let total = 0;
                    cartItems.forEach(item => { total += item.unitPrice * item.quantity; });
                    const totalEncoded = encodeURIComponent(total);
                    // Redirige a la página de pago incluyendo el total en la query string
                    window.location.href = `pay.html?total=${totalEncoded}`;
                });
            }
            document.getElementById('back-to-store').addEventListener('click', () => {
                console.log("Navegar de vuelta a la tienda.");
            });
        };
    </script>
</body>
</html>
