<div class="d-flex align-items-center">
    <button class="navbar-toggler d-lg-none border-0 px-0 me-3" type="button" data-bs-toggle="collapse"
        data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <i class="bi bi-list text-light fs-4"></i>
    </button>
    <a class="navbar-brand" href="#">
        <i class="bi bi-bar-chart-steps"></i> RPE TRACKER
    </a>
</div>
<div class="user-profile d-flex align-items-center">
    <i class="bi bi-person-circle fs-4 me-2"></i>
    <span class="d-none d-md-inline myuser">Perfil / Usuario</span>
    <div class="vr d-none d-md-inline"></div>
    <a href="#" class="me-3"><i class="bi bi-gear-fill fs-5"></i></a>
    <div class="vr d-none d-md-inline"></div>
    <a href="#" id="logout-link" class="ms-3 text-danger" title="Cerrar Sesión">
        <i class="bi bi-power fs-5"></i>
    </a>
</div>

<script>
    // Listener para el enlace de cerrar sesión. Usa logoutRpeTracker si está disponible.
    (function () {
        const logoutEl = document.getElementById('logout-link');
        if (!logoutEl) return;

        logoutEl.addEventListener('click', function (e) {
            e.preventDefault();
            // Si la función centralizada está expuesta, usarla
            if (typeof window.logoutRpeTracker === 'function') {
                // Ajustar la ruta según la ubicación del header (desde páginas internas usar '../index.html')
                window.logoutRpeTracker('../index.html');
                return;
            }

            // Fallback: eliminar la key y redirigir
            try {
                sessionStorage.removeItem('rpe-tracker-current-user');
            } catch (err) {
                console.error('Error al eliminar sesión (fallback):', err);
            }
            window.location.href = '../index.html';
        });
    })();
</script>
</div>