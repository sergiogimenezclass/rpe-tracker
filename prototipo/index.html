<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPE TRACKER - Inicio de Sesión</title>
    <!-- Incluir Bootstrap CSS para utilidad de layout -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <!-- Incluir Font Awesome (para el ícono de Google, aunque usaremos un SVG para mayor fidelidad) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Variables y Estilos Generales */
        :root {
            --dark-bg: #2c3e50; /* Azul marino oscuro, usado como fondo en las imágenes */
            --card-bg: #ffffff; /* Blanco para la tarjeta principal */
            --text-dark: #34495e; /* Texto oscuro */
            --accent-orange: #e67e22; /* Naranja vibrante para botones */
            --accent-hover: #d66910;
            --border-color: #bdc3c7; /* Gris claro para bordes */
        }

        body {
            background-color: var(--dark-bg);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem; /* Padding para móvil */
        }

        /* ------------------ TARJETA DE LOGIN ------------------ */
        .login-card {
            background-color: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        /* Contenedor de Tabs (Inicia Sesión / Regístrate) */
        .tab-container {
            display: flex;
            border-bottom: 2px solid #ecf0f1;
            margin-bottom: 2rem;
        }

        .tab {
            flex-grow: 1;
            text-align: center;
            padding: 0.75rem 0;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-dark);
            transition: all 0.2s;
            border: none;
            background: none;
            border-radius: 0.25rem;
            margin: 0 0.25rem;
        }

        .tab.active {
            background-color: var(--accent-orange);
            color: white;
        }

        /* Botón de Google */
        .btn-google {
            background-color: var(--card-bg);
            color: var(--text-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            width: 100%;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .btn-google:hover {
            background-color: #f8f9fa;
        }
        
        /* SVG de Google para mejor visualización */
        .google-icon {
            margin-right: 0.75rem;
        }
        
        /* Separador 'o' */
        .separator {
            text-align: center;
            margin: 1.5rem 0;
            position: relative;
            color: var(--border-color);
            font-size: 0.9rem;
        }

        .separator::before,
        .separator::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background-color: #ecf0f1;
        }

        .separator::before {
            left: 0;
        }

        .separator::after {
            right: 0;
        }

        /* Campos de Formulario */
        .form-control {
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            margin-bottom: 1rem;
            color: var(--text-dark);
            font-size: 1rem;
        }

        .form-control:focus {
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 0.1rem rgba(230, 126, 34, 0.5); /* Sombra naranja */
        }
        
        /* Botón de Iniciar Sesión / Enviar */
        .btn-main {
            background-color: var(--accent-orange);
            color: var(--card-bg);
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            width: 100%;
            font-weight: 600;
            transition: background-color 0.2s;
            margin-top: 0.5rem;
        }

        .btn-main:hover {
            background-color: var(--accent-hover);
        }
        
        /* Enlace de recuperación */
        .action-link {
            display: block;
            text-align: center;
            margin-top: 1.5rem;
            color: var(--accent-orange);
            font-weight: 500;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .action-link:hover {
            color: var(--accent-hover);
        }
        
        /* Footer de la tarjeta */
        .card-footer-info {
            text-align: center;
            color: var(--border-color);
            font-size: 0.75rem;
            margin-top: 1rem;
        }

        /* Estilos para la ayuda de usuarios demo */
        .demo-users-help {
            display: block;
            margin-bottom: 1rem;
            color: var(--border-color);
        }

        .demo-users-help .title {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .demo-users-help .users {
            display: block;
            padding-left: 0.5rem;
        }

    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            emailInput.addEventListener('change', function() {
                const selectedEmail = this.value;
                if (selectedEmail === 'atleta@test.com' || selectedEmail === 'entrenador@test.com') {
                    passwordInput.value = 'demo123';
                } else {
                    passwordInput.value = '';
                }
            });
        });
    </script>
</head>
<body>

    <div class="login-card">
        
        <!-- ======================= VISTA DE INICIO DE SESIÓN ======================= -->
        <div id="login-view">
            <!-- Contenedor de Tabs (Botones) -->
            <div class="tab-container">
                <button class="tab active" id="tab-login">Inicia Sesión</button>
                <button class="tab tab-register" id="tab-register">Regístrate</button>
            </div>

            <!-- Opción de Google -->
            <button class="btn btn-google">
                <!-- SVG de Google (adaptado para que se vea bien en el Canvas) -->
                <svg class="google-icon" width="20" height="20" viewBox="0 0 48 48">
                    <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.23l6.59-6.59C34.46 3.73 29.56 2 24 2 15.65 2 8.38 5.6 3.96 11.23l7.98 6.18C13.56 12.83 18.46 9.5 24 9.5z"/>
                    <path fill="#4285F4" d="M46.7 24.5h-2.1c0-.85-.1-1.67-.2-2.49h-10.7v4.61h6.29c-.68 3.51-2.9 6.25-6.09 8.27l6.23 4.84c3.81-3.66 6.09-8.79 6.09-15.23z"/>
                    <path fill="#FBBC05" d="M12.94 28.59c-.27-.8-.41-1.64-.41-2.59s.14-1.79.41-2.59L5.95 17.5C4.24 21.04 3.2 25.1 3.2 29.5c0 4.41 1.04 8.46 2.75 12.01l6.99-5.41c-.27-.8-.41-1.64-.41-2.51z"/>
                    <path fill="#34A853" d="M24 45.5c5.54 0 10.44-1.73 14.07-4.57l-6.23-4.84c-3.19 2.02-5.91 4.76-6.09 8.27h-10.7c-.1-1.25-.2-2.49-.2-3.79s.1-2.54.2-3.79H24z"/>
                </svg>
                Continuar con Google
            </button>

            <!-- Separador -->
            <div class="separator">o</div>

            <!-- Formulario de Email/Contraseña -->
            <form id="login-form">
                <input type="email" 
                       class="form-control" 
                       placeholder="Email" 
                       id="email" 
                       list="demo-users"
                       required>
                <datalist id="demo-users">
                    <option value="atleta@test.com">
                    <option value="entrenador@test.com">
                </datalist>
                <small class="demo-users-help">
                    <span class="title">Usuarios demo:</span>
                    <span class="users">
                        atleta@test.com<br>
                        entrenador@test.com<br>
                        (Contraseña para ambos: demo123)
                    </span>
                </small>
                <input type="password" class="form-control" placeholder="Contraseña" id="password" required>
                
                <button type="submit" class="btn btn-main" id="btn-login-submit">Iniciar Sesión</button>
            </form>

            <a href="#" class="action-link" id="forgot-password-link">Recuperar contraseña</a>
        </div>

        <!-- ======================= VISTA DE REGISTRO ======================= -->
        <div id="register-view" style="display: none;">
            <!-- Contenedor de Tabs (Botones) -->
            <div class="tab-container">
                <button class="tab" id="tab-login-reg">Inicia Sesión</button>
                <button class="tab active tab-register" id="tab-register-reg">Regístrate</button>
            </div>

            <!-- Opción de Google -->
            <button class="btn btn-google">
                <svg class="google-icon" width="20" height="20" viewBox="0 0 48 48">
                    <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.23l6.59-6.59C34.46 3.73 29.56 2 24 2 15.65 2 8.38 5.6 3.96 11.23l7.98 6.18C13.56 12.83 18.46 9.5 24 9.5z"/>
                    <path fill="#4285F4" d="M46.7 24.5h-2.1c0-.85-.1-1.67-.2-2.49h-10.7v4.61h6.29c-.68 3.51-2.9 6.25-6.09 8.27l6.23 4.84c3.81-3.66 6.09-8.79 6.09-15.23z"/>
                    <path fill="#FBBC05" d="M12.94 28.59c-.27-.8-.41-1.64-.41-2.59s.14-1.79.41-2.59L5.95 17.5C4.24 21.04 3.2 25.1 3.2 29.5c0 4.41 1.04 8.46 2.75 12.01l6.99-5.41c-.27-.8-.41-1.64-.41-2.51z"/>
                    <path fill="#34A853" d="M24 45.5c5.54 0 10.44-1.73 14.07-4.57l-6.23-4.84c-3.19 2.02-5.91 4.76-6.09 8.27h-10.7c-.1-1.25-.2-2.49-.2-3.79s.1-2.54.2-3.79H24z"/>
                </svg>
                Continuar con Google
            </button>

            <!-- Separador -->
            <div class="separator">o</div>

            <!-- Formulario de Registro -->
            <form id="register-form">
                <div class="row">
                    <div class="col-6">
                        <input type="text" 
                               class="form-control" 
                               placeholder="Nombre" 
                               id="register-nombre" 
                               required>
                    </div>
                    <div class="col-6">
                        <input type="text" 
                               class="form-control" 
                               placeholder="Apellido" 
                               id="register-apellido" 
                               required>
                    </div>
                </div>
                <input type="email" 
                       class="form-control" 
                       placeholder="Email" 
                       id="register-email" 
                       required>
                <input type="password" 
                       class="form-control" 
                       placeholder="Contraseña" 
                       id="register-password" 
                       required>
                <input type="password" 
                       class="form-control" 
                       placeholder="Confirmar Contraseña" 
                       id="register-password-confirm" 
                       required>
                
                <div class="form-check mb-3">
                    <input class="form-check-input" type="radio" name="userType" id="typeAtleta" value="atleta" required>
                    <label class="form-check-label" for="typeAtleta">
                        Soy Atleta
                    </label>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="radio" name="userType" id="typeEntrenador" value="entrenador">
                    <label class="form-check-label" for="typeEntrenador">
                        Soy Entrenador
                    </label>
                </div>
                
                <button type="submit" class="btn btn-main" id="btn-register-submit">Crear Cuenta</button>
            </form>
        </div>


        <!-- ======================= VISTA DE RECUPERAR CONTRASEÑA ======================= -->
        <div id="forgot-password-view" style="display: none;">
             <h2 class="h4 fw-bold mb-3" style="color: var(--text-dark);">Recuperar Contraseña</h2>
             <p class="mb-4" style="color: var(--text-dark); font-size: 0.95rem;">
                Ingresa tu email para recibir instrucciones y crear una nueva contraseña.
             </p>
             
             <form id="recover-form">
                <!-- El diseño tiene dos campos de email, probablemente para confirmación, pero usaremos uno solo para la funcionalidad básica de recuperación -->
                <input type="email" class="form-control" placeholder="Email" id="recover-email" required>
                <!-- Aunque la imagen muestra otro campo de email, la lógica estándar usa solo uno aquí -->
                 <input type="email" class="form-control" placeholder="Email (Confirmación)" id="recover-email-confirm" required>
                 
                 <button type="submit" class="btn btn-main" id="btn-recover-submit">Enviar instrucciones</button>
             </form>

             <a href="#" class="action-link" id="back-to-login-link">Volver a Iniciar Sesión</a>
        </div>


        <!-- Footer de la tarjeta (Común a ambas vistas) -->
        <div class="card-footer-info">
            © 2025 RPE Tracker V0.1.0
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loginView = document.getElementById('login-view');
            const registerView = document.getElementById('register-view');
            const forgotPasswordView = document.getElementById('forgot-password-view');
            const forgotPasswordLink = document.getElementById('forgot-password-link');
            const backToLoginLink = document.getElementById('back-to-login-link');
            
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const recoverForm = document.getElementById('recover-form');
            
            // Tabs de la vista de login
            const tabLogin = document.getElementById('tab-login');
            const tabRegister = document.getElementById('tab-register');
            
            // Tabs de la vista de registro
            const tabLoginReg = document.getElementById('tab-login-reg');
            const tabRegisterReg = document.getElementById('tab-register-reg');

            /**
             * Alterna entre las vistas de Login, Registro y Recuperación de Contraseña.
             * @param {string} viewId - 'login', 'register' o 'forgot'.
             */
            function showView(viewId) {
                // Oculta todas las vistas primero
                loginView.style.display = 'none';
                registerView.style.display = 'none';
                forgotPasswordView.style.display = 'none';

                // Muestra la vista solicitada
                switch(viewId) {
                    case 'login':
                        loginView.style.display = 'block';
                        tabLogin.classList.add('active');
                        tabRegister.classList.remove('active');
                        tabLoginReg.classList.remove('active');
                        tabRegisterReg.classList.add('active');
                        break;
                    case 'register':
                        registerView.style.display = 'block';
                        tabLogin.classList.remove('active');
                        tabRegister.classList.add('active');
                        tabLoginReg.classList.remove('active');
                        tabRegisterReg.classList.add('active');
                        break;
                    case 'forgot':
                        forgotPasswordView.style.display = 'block';
                        break;
                }
            }
            
            // ---------------- Lógica de TABS ----------------
            tabLogin.addEventListener('click', () => {
                showView('login');
            });

            tabRegister.addEventListener('click', () => {
                showView('register');
            });

            tabLoginReg.addEventListener('click', () => {
                showView('login');
            });

            tabRegisterReg.addEventListener('click', () => {
                showView('register');
            });
            
            // ---------------- Lógica de Navegación ----------------
            forgotPasswordLink.addEventListener('click', (e) => {
                e.preventDefault();
                showView('forgot');
            });

            backToLoginLink.addEventListener('click', (e) => {
                e.preventDefault();
                showView('login');
            });

            // ---------------- Simulación de Envíos de Formulario ----------------
            
            // 1. Simulación de envío de formulario de LOGIN
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                
                console.log(`[LOGIN] Intentando iniciar sesión con: ${email} / ${password}`);

                if (email && password) {
                     console.log("[LOGIN] Inicio de sesión simulado exitoso. Redirigiendo...");
                     
                     // Para demostración, usaremos estos usuarios de prueba:
                     // atleta@test.com -> dashboard de atleta
                     // entrenador@test.com -> dashboard de entrenador
                     if (email === 'atleta@test.com') {
                         window.location.href = 'atletas/index.html';
                     } else if (email === 'entrenador@test.com') {
                         window.location.href = 'entrenador/index.html';
                     } else {
                         alert('Usuario no reconocido. Por favor use atleta@test.com o entrenador@test.com para la demo.');
                     }
                } else {
                     console.error("[LOGIN] Por favor, complete ambos campos.");
                     alert('Por favor, complete todos los campos.');
                }
            });

            // 2. Simulación de envío de formulario de REGISTRO
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const nombre = document.getElementById('register-nombre').value;
                const apellido = document.getElementById('register-apellido').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-password-confirm').value;
                const userType = document.querySelector('input[name="userType"]:checked')?.value;

                if (password !== confirmPassword) {
                    alert('Las contraseñas no coinciden');
                    return;
                }

                if (!userType) {
                    alert('Por favor seleccione si es Atleta o Entrenador');
                    return;
                }

                console.log('[REGISTER] Registro simulado:', {
                    nombre,
                    apellido,
                    email,
                    userType
                });

                // Simular registro exitoso
                alert('Registro exitoso! Por favor inicie sesión.');
                showView('login');
            });

            // 3. Simulación de envío de formulario de RECUPERACIÓN
            recoverForm.addEventListener('submit', (e) => {
                 e.preventDefault();
                 const email = document.getElementById('recover-email').value;
                 const confirmEmail = document.getElementById('recover-email-confirm').value;

                 if (email !== confirmEmail) {
                    console.error("[RECOVER] Los emails no coinciden.");
                    return;
                 }
                 
                 console.log(`[RECOVER] Enviando instrucciones a: ${email}`);
                 
                 if (email) {
                      // Simular envío exitoso y volver al login
                      console.log("[RECOVER] Instrucciones enviadas (simulación). Volviendo a Iniciar Sesión.");
                      // Aquí iría la llamada real a la función de Firebase para enviar el correo
                      showView('login');
                 } else {
                      console.error("[RECOVER] Por favor, ingrese un email.");
                 }
            });
        });
    </script>
</body>
</html>
